#!/usr/bin/env python

# This will work when installed in site-packages on a 
# target system where the runner script is in /usr/bin
#
# So, you don't need anything special - no fancy path tricks.

from argparse import ArgumentParser

from lookOver import __version__ as VERSION
from lookOver import pir

def main():
    ap = ArgumentParser(prog='lookOver',
            description='%(prog)s - Raspberry Pi script to record pictures when PIR module motion is detected',
            epilog="And that's how you'd foo a bar"
            )
    ap.add_argument('-p', '--pir', help='Set pin number on which is PIR sensor connected', nargs='?')
    ap.add_argument('-l', '--led', help='Set pin number on which LED will be enabled when motion sensed', nargs='?')
    ap.add_argument('--hflip', help='Set camera hflip', nargs='?', default=False)
    ap.add_argument('--vflip', help='Set camera vflip', nargs='?', default=False)
    ap.add_argument('--log', help='Set log level', nargs='?')
    ap.add_argument('--test', help='Execute test function', nargs='?', default=False)
    ap.add_argument('--loglevel', help='Log Level', nargs='?')
    ap.add_argument('--verbose', '-v', action='count')
    ap.add_argument('--version', action='version', version=('%(prog)s '+  VERSION))
    args = ap.parse_args()

    lo = pir.Sensor(args)
    lo.sense()

if __name__ == '__main__':
    main()
